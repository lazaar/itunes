!function(){"use strict";angular.module("itunes",["ngMessages","ui.router","ngCart"])}(),function(){"use strict";angular.module("itunes").factory("searchService",["$http","$q","$log","itunesConstantes",function(e,r,n,s){function t(t){var o=r.defer();if(navigator.onLine){var i=s.url;e.jsonp(encodeURI(i),{params:{callback:"JSON_CALLBACK",term:t}}).success(function(e){o.resolve(e)}).error(function(e,r,t,i){n.debug("Erreur lors de la récupération des resultats :",e,r,t,i),o.reject(s.messageError.wsError)})}else o.reject(s.messageError.noConnection);return o.promise}return{searchMusic:t}}])}(),function(){"use strict";angular.module("itunes").directive("masonry",["$timeout",function(e){return{restrict:"AC",link:function(r,n,s){var t=n[0],o=angular.extend({itemSelector:".item"},angular.fromJson(s.masonry)),i=r.masonry=new Masonry(t,o),a=0;r.update=function(){a&&e.cancel(a),a=e(function(){a=0,i.reloadItems(),i.layout(),n.children(o.itemSelector).css("visibility","visible")},120)},r.removeBrick=function(){e(function(){i.reloadItems(),i.layout()},500)},r.appendBricks=function(e){i.appended(e)},r.$on("masonry.layout",function(){i.layout()}),r.update()}}}]).directive("masonryTile",function(){return{restrict:"AC",link:function(e,r){r.css("visibility","hidden");var n=r.parent("*[masonry]:first").scope(),s=n.update,t=n.removeBrick,o=n.appendBricks;s&&(imagesLoaded(r[0],s),r.ready(s)),o&&imagesLoaded(r[0],o(r)),e.$on("$destroy",function(){t&&t()})}}})}(),function(){"use strict";function e(e){function r(){s.isLoading=!0,e.searchMusic(s.query).then(function(e){s.songs=e,s.errorMsg="",s.isLoading=!1},function(e){s.errorMsg=e,s.isLoading=!1})}function n(){s.validate=r,s.errorMsg="",s.songs={resultCount:0}}var s=this;n()}angular.module("itunes").controller("MainController",e),e.$inject=["searchService"]}(),function(){"use strict";angular.module("itunes").constant("itunesConstantes",{url:"https://itunes.apple.com/search",messageError:{noConnection:"Même iTunes ne fonctionne pas en mode non connecté, Vérifiez votre connexion internet puis réessayer",wsError:"Oups! Une erreur est survenue. Veuillez réessayer ultèrieurement. "}})}(),function(){"use strict";function e(e,r){e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"vm"}),r.otherwise("/")}angular.module("itunes").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),angular.module("itunes").run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="container"><div class="jumbotron text-center" ng-mouseleave="showCart=false"><h1>iTunes Recherche</h1><form class="form-group" name="searchForm" ng-submit="searchForm.$valid && vm.validate()" novalidate=""><input type="text" name="search" ng-model="vm.query" class="form-control" required=""><div class="form-errors" ng-messages="searchForm.search.$error" ng-if="searchForm.search.$invalid && searchForm.$submitted"><div class="form_error" ng-message="required">Le vide est indispensable pour notre vie, mais pas pour une recherche :)</div></div><button type="submit" class="btn btn-lg btn-success" ng-disabled="vm.isLoading"><span ng-show="!vm.isLoading">Rechercher</span> <span ng-show="vm.isLoading">Abracadabra ...</span></button></form><div><div class="clearfix"><ngcart-summary ng-mouseover="showCart=true"></ngcart-summary></div><ngcart-cart ng-show="showCart" ng-mouseleave="showCart=false"></ngcart-cart></div></div><div class="loader" ng-show="vm.isLoading"><div></div><div></div><div></div><div></div><div></div></div><div class="row" masonry=\'{ "transitionDuration" : "0.4s" , "itemSelector" : ".tile"}\' ng-if="vm.songs.resultCount !== 0"><div class="col-xs-6 col-sm-4 col-md-3 tile" masonry-tile="" ng-repeat="song in vm.songs.results"><div class="song"><img ng-src="{{song.artworkUrl100}}" alt=""><div class="song-info"><h2 class="song-title">{{song.trackName}}</h2><h3 class="song-artiste">{{song.artistName}}</h3><p class="song-price">{{song.trackPrice | currency}}</p><p class="song-btn"><ngcart-addtocart id="{{song.trackId}}" name="{{song.trackName + \' - \' + song.artistName}}" price="{{song.trackPrice}}" quantity="1"></ngcart-addtocart></p></div></div></div></div><div ng-if="vm.songs.resultCount == 0 && !vm.isLoading" class="text"><p class="error" ng-show="vm.errorMsg != \'\'">{{vm.errorMsg}}</p><p ng-show="vm.errorMsg == \'\'">Si vous avez marre d\'iTunes, on vous propose un nouveau store de musique avec exactement les mêmes résultats d\'iTunes :)</p></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-df667f7388.js.map
